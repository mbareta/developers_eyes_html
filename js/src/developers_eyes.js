$(document).ready(function () {
    var data = {
        panorama_url: '/img/panorama.jpg',
        json_data: `[
            {"rows": [
                {"values": ["Country Code", "Series Name", 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014], "key": "Country Name"},
                {"values": ["CRI", "GDP per capita(constant 2005 US$)", 3170.18793711633, 3373.42033076234, 3532.90876260905, 3608.53302967485, 3658.98224223811, 3603.35510547364, 3715.52485110614, 3937.05933703145, 4170.70622522961, 4162.82665791268, 4132.52138735779, 4182.95380703975, 4383.1476143738, 4503.19338630294, 4700.01492584504, 5040.34178493081, 5364.76516479515, 5436.60556282195, 5310.93821338329, 5504.14290617609, 5683.76225579867, 5908.55678781236, 6043.75414689558, 6188.14407507599], "key": "Costa Rica"},
                {"values": ["SLV", "GDP per capita(constant 2005 US$)", 1888.33156474289, 2004.19840038521, 2124.44044220696, 2226.00562572195, 2342.65711423748, 2359.55279595724, 2438.60091167826, 2510.70949101182, 2579.50501290329, 2618.63092751033, 2648.38859150902, 2696.7424055868, 2746.31954298569, 2785.73560800514, 2874.25725626454, 2976.51177088394, 3081.06639350193, 3111.08348414215, 3005.0189505571, 3037.48656326376, 3096.15610540121, 3145.54930426874, 3194.49699256113, 3247.22047210487], "key": "El Salvador"},
                {"values": ["GTM", "GDP per capita(constant 2005 US$)", 1729.80743948479, 1769.36381661022, 1793.91318144897, 1820.77439854797, 1864.58824024369, 1873.61955955572, 1908.71517065282, 1956.33661145593, 1983.16215389035, 2005.53834348617, 2002.95653915998, 2030.31261492976, 2031.83790809797, 2046.34685679481, 2064.04718325717, 2125.66349495668, 2209.29219607899, 2231.79017599905, 2195.08309221144, 2209.90778386867, 2253.39511441851, 2272.08398747772, 2307.74029567685, 2357.03812627722], "key": "Guatemala"},
                {"values": ["NIC", "GDP per capita(constant 2005 US$)", 913.566163421649, 897.085357099652, 874.337849612095, 884.702881233819, 918.416446011061, 958.28557856419, 978.425582831052, 997.448851883486, 1050.36593213714, 1076.66979820592, 1092.47498063911, 1085.60347354676, 1098.28585360362, 1141.63587727505, 1175.11644341798, 1207.98893752701, 1255.30399871334, 1274.39204867103, 1223.46767127865, 1246.861595511, 1308.58148431947, 1359.52542110965, 1404.45092106611, 1453.80671468384], "key": "Nicaragua"},
                {"values": ["PAN", "GDP per capita(constant 2005 US$)", 3314.83756402976, 3513.69109206543, 3630.42026631433, 3658.44284597626, 3647.20297756068, 3673.61215525597, 3831.59408257962, 4030.04465610456, 4104.98895779159, 4134.93362845999, 4080.35813769803, 4094.58188724038, 4189.80448906285, 4424.69212033415, 4659.02308949987, 4967.58795887999, 5472.43811170622, 5870.08417478163, 5999.24985806055, 6243.14104755411, 6800.08013769774, 7373.17284523942, 7859.013417547, 8209.83204274097], "key": "Panama"},
                {"values": ["LCN", "GDP per capita(constant 2005 US$)", 4189.0608909445, 4245.22830760494, 4335.84776522932, 4463.21435397123, 4425.61002004365, 4519.21925594888, 4685.18987208539, 4731.75684013509, 4682.07571497361, 4795.29618548092, 4761.13961441207, 4712.59931692328, 4738.27624844271, 4945.29623032501, 5095.89545156483, 5301.12573838062, 5510.06877309398, 5631.3098421998, 5473.72185681241, 5715.51881887511, 5905.51014741888, 6015.95443709202, 6108.66298185482, 6124.10401399049], "key": "Latin America & Caribbean"}], "name": "gdp(per capita)"},
            {"rows": [
                {"values": ["Country Code", "Series Name", 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014], "key": "Country Name"},
                {"values": ["CRI", "Population, total", 3175654, 3257463, 3341005, 3425692, 3510925, 3596733, 3682725, 3767369, 3848725, 3925450, 3996800, 4063208, 4125970, 4187039, 4247843, 4308790, 4369465, 4429506, 4488261, 4545273, 4600487, 4654148, 4706433, 4757606], "key": "Costa Rica"},
                {"values": ["SLV", "Population, total", 5321576, 5392142, 5461834, 5528012, 5588743, 5643363, 5692300, 5736075, 5775660, 5811836, 5844738, 5874301, 5900929, 5925089, 5947206, 5967556, 5986414, 6004199, 6021368, 6038306, 6055208, 6072233, 6089644, 6107706], "key": "El Salvador"},
                {"values": ["GTM", "Population, total", 9385000, 9619113, 9860063, 10106463, 10357354, 10612300, 10871786, 11136814, 11408815, 11688660, 11976725, 12272208, 12573346, 12877711, 13183505, 13490041, 13797629, 14106687, 14418033, 14732261, 15049280, 15368759, 15690793, 16015494], "key": "Guatemala"},
                {"values": ["NIC", "Population, total", 4236805, 4331273, 4426577, 4520727, 4612229, 4700777, 4786641, 4869627, 4949661, 5026792, 5100750, 5171736, 5240876, 5309703, 5379327, 5450217, 5522119, 5594524, 5666595, 5737722, 5807787, 5877034, 5945646, 6013913], "key": "Nicaragua"},
                {"values": ["PAN", "Population, total", 2522901, 2575330, 2628511, 2682720, 2738125, 2794845, 2852739, 2911383, 2970193, 3028751, 3086887, 3144728, 3202511, 3260611, 3319301, 3378600, 3438398, 3498679, 3559401, 3620506, 3681979, 3743761, 3805683, 3867535], "key": "Panama"}], "name": "population"},
            {"rows": [
                {"values": ["Country Code", "Series Name", 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011], "key": "Country Name"},
                {"values": ["CRI", "Control of Corruption: Estimate", 0.572336077690125, 0.783101975917816, 0.759284019470215, 0.589914679527283, 0.697177410125732, 0.304173946380615, 0.386167228221893, 0.322114259004593, 0.395802676677704, 0.436675190925598, 0.705790221691132, 0.647821247577667, 0.58467048406601, 0.582731008529663, 0.593616664409637, 0.729301154613495], "key": "Costa Rica"},
                {"values": ["SLV", "Control of Corruption: Estimate", -0.900336682796478, -0.809845805168152, -0.504208564758301, -0.758362829685211, -0.372567594051361, -0.39546737074852, -0.415667086839676, -0.186154052615166, -0.286799132823944, -0.297900140285492, -0.195709228515625, -0.233872339129448, -0.21156333386898, -0.383848279714584, -0.349637061357498, -0.389643520116806], "key": "El Salvador"},
                {"values": ["GTM", "Control of Corruption: Estimate", -0.823840618133545, -0.845809161663055, -0.678275287151337, -0.498960882425308, -0.665275573730469, -0.537537753582001, -0.632106065750122, -0.740045130252838, -0.688935458660126, -0.615245223045349, -0.478128731250763, -0.481299340724945, -0.470055162906647, -0.615639567375183, -0.577307105064392, -0.699251055717468], "key": "Guatemala"},
                {"values": ["PAN", "Control of Corruption: Estimate", -0.345166236162186, -0.157839938998222, -0.394940257072449, -0.319484293460846, -0.360160768032074, -0.274418950080872, -0.376788586378098, -0.3730388879776, -0.354772180318832, -0.113196991384029, -0.318169862031937, -0.351687997579575, -0.341428369283676, -0.38571685552597, -0.361672222614288, -0.355235695838928], "key": "Panama"},
                {"values": ["NIC", "Control of Corruption: Estimate", -0.488949924707413, -0.865444600582123, -0.977963149547577, -0.418189406394959, -0.447007775306702, -0.362950056791306, -0.606435894966125, -0.67812317609787, -0.764142453670502, -0.756578326225281, -0.730837762355804, -0.773449122905731, -0.736843407154083, -0.777202665805817, -0.731381475925446, -0.884931206703186], "key": "Nicaragua"}], "name": "corruption"},
            {"rows": [
                {"values": ["Country Code", "Series Name", 2010, 2011, 2012, 2013], "key": "Country Name"},
                {"values": ["CRI", "Gini", 0.481, 0.486, 0.486, 0.492], "key": "Costa Rica"},
                {"values": ["SLV", "Gini", 0.445, 0.424, 0.418, 0.435], "key": "El Salvador"},
                {"values": ["PAN", "Gini", 0.519, 0.518, 0.519, 0.517], "key": "Panama"}], "name": "GINI"},
            {"rows": [["code", "title", "background_url", "source_footnote"], ["IP", "Investment Potential", "https://s3.amazonaws.com/mit-cre/XBlocks/multibar-charts/bg-static-int-invest-poten%402x.jpg", null]], "name": "specs"},
            {"rows": [["ID", "chart_name", "legend_text", "x_title", "y_title", "format_type", "numberOfYticks"], [1, "gdp (per capita)", null, "Year", "US Dollar($)", "',.2f'", 5], [2, "population", null, "Year", "Total population", "','", 5], [3, "corruption", null, "Year", "Relative Rankings", "'.1f'", 10], [4, "GINI", null, "Year", "Index", "'.0%'", 6]], "name": "charts"}]`
    };
    var $element = $('.developers_eyes_block');
    var photoSphereView;

    $('a').on('click', function (evt) {
        var id = this.id;
        $(this).zoomTo({
            targetsize: 0.5,
            duration: 600,
            root: $('#container'),
            animationendcallback: function () {
                $('#' + id + 'Content').fadeIn();

                if (id === 'goodBones') {
                    $("#twentytwenty").twentytwenty();
                }
                else if (id === 'placemakingPotential') {
                    if (!photoSphereView) {
                        photoSphereView = PhotoSphereViewer({
                            container: document.getElementById('panoContainer'),
                            panorama: data['panorama_url'],
                            navbar: [
                                'autorotate', 'zoom'
                            ],
                            fisheye: true
                        });
                    }
                }
                else if (id === 'investmentPotential') {
                    initMultibarChart($element, data);
                }
            }
        });
        evt.stopPropagation();
    });

    $('.back-to-aerial-view').on('click', function () {
        $('.developerEyesContent').fadeOut(400);
        $('#container')
            .css('transition', 'transform .6s')
            .css('transform', 'translate(0, 0) rotate(0) skew(0, 0) scale(1, 1)');

        setTimeout(function () {
            $('#container').css('transition', '');
        }, 1000);


    });

    $(window).on('resize', function () {
        $('#container').css('width', window.innerWidth).css('height', window.innerHeight);
        $('.course-wrapper').css('max-width', window.innerWidth);
    });
    $('#container').css('width', window.innerWidth).css('height', window.innerHeight);
    $('.course-wrapper').css('max-width', window.innerWidth);
});
